{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Prometheus Node Exporter Values",
  "description": "Configuration schema for Prometheus Node Exporter Helm chart",
  "type": "object",
  "definitions": {
    "image": {
      "description": "Container image parameters.",
      "type": "object",
      "properties": {
        "registry": {
          "type": "string",
          "default": "quay.io"
        },
        "repository": {
          "type": "string",
          "default": "prometheus/node-exporter"
        },
        "tag": {
          "type": "string",
          "default": ""
        },
        "pullPolicy": {
          "type": "string",
          "enum": [
            "IfNotPresent",
            "Always",
            "Never"
          ],
          "default": "IfNotPresent"
        },
        "digest": {
          "type": "string",
          "default": ""
        }
      }
    },
    "resources": {
      "description": "Resource limits and requests for the Container.",
      "type": "object",
      "properties": {
        "limits": {
          "type": "object",
          "properties": {
            "cpu": {
              "type": "string"
            },
            "memory": {
              "type": "string"
            }
          }
        },
        "requests": {
          "type": "object",
          "properties": {
            "cpu": {
              "type": "string"
            },
            "memory": {
              "type": "string"
            }
          }
        }
      }
    },
    "securityContext": {
      "description": "Security context for the pod with enhanced security defaults.",
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "runAsNonRoot": {
          "type": "boolean",
          "default": true
        },
        "runAsUser": {
          "type": "integer",
          "default": 1000
        },
        "runAsGroup": {
          "type": "integer",
          "default": 1000
        },
        "fsGroup": {
          "type": "integer",
          "default": 1000
        },
        "seccompProfile": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "RuntimeDefault",
                "Unconfined",
                "Localhost"
              ],
              "default": "RuntimeDefault"
            }
          }
        }
      }
    },
    "podSecurityContext": {
      "description": "Pod security context configuration with enhanced security defaults.",
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "runAsNonRoot": {
          "type": "boolean",
          "default": true
        },
        "runAsUser": {
          "type": "integer",
          "default": 1000
        },
        "runAsGroup": {
          "type": "integer",
          "default": 1000
        },
        "fsGroup": {
          "type": "integer",
          "default": 1000
        },
        "fsGroupChangePolicy": {
          "type": "string",
          "enum": [
            "OnRootMismatch",
            "Always"
          ],
          "default": "OnRootMismatch"
        },
        "seccompProfile": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "RuntimeDefault",
                "Unconfined",
                "Localhost"
              ],
              "default": "RuntimeDefault"
            }
          }
        }
      }
    },
    "containerSecurityContext": {
      "description": "Container security context with enhanced security defaults.",
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "runAsNonRoot": {
          "type": "boolean",
          "default": true
        },
        "runAsUser": {
          "type": "integer",
          "default": 1000
        },
        "runAsGroup": {
          "type": "integer",
          "default": 1000
        },
        "readOnlyRootFilesystem": {
          "type": "boolean",
          "default": true
        },
        "allowPrivilegeEscalation": {
          "type": "boolean",
          "default": false
        },
        "capabilities": {
          "type": "object",
          "properties": {
            "drop": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "default": [
                "ALL"
              ]
            }
          }
        },
        "seccompProfile": {
          "type": "object",
          "properties": {
            "type": {
              "type": "string",
              "enum": [
                "RuntimeDefault",
                "Unconfined",
                "Localhost"
              ],
              "default": "RuntimeDefault"
            }
          }
        }
      }
    },
    "probe": {
      "description": "Kubernetes probe configuration",
      "type": "object",
      "properties": {
        "failureThreshold": {
          "type": "integer",
          "default": 3
        },
        "httpGet": {
          "type": "object",
          "properties": {
            "httpHeaders": {
              "type": "array",
              "items": {
                "type": "object"
              },
              "default": []
            },
            "scheme": {
              "type": "string",
              "enum": [
                "http",
                "https"
              ],
              "default": "http"
            }
          }
        },
        "initialDelaySeconds": {
          "type": "integer",
          "default": 0
        },
        "periodSeconds": {
          "type": "integer",
          "default": 10
        },
        "successThreshold": {
          "type": "integer",
          "default": 1
        },
        "timeoutSeconds": {
          "type": "integer",
          "default": 1
        }
      }
    },
    "volumeMount": {
      "description": "Volume mount configuration",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "mountPath": {
          "type": "string"
        },
        "readOnly": {
          "type": "boolean"
        }
      },
      "required": [
        "name",
        "mountPath"
      ]
    },
    "hostVolumeMount": {
      "description": "Host volume mount configuration",
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "hostPath": {
          "type": "string"
        },
        "type": {
          "type": "string",
          "enum": [
            "",
            "DirectoryOrCreate",
            "Directory",
            "FileOrCreate",
            "File",
            "Socket",
            "CharDevice",
            "BlockDevice"
          ]
        },
        "mountPath": {
          "type": "string"
        },
        "readOnly": {
          "type": "boolean"
        },
        "mountPropagation": {
          "type": "string",
          "enum": [
            "None",
            "HostToContainer",
            "Bidirectional"
          ]
        }
      },
      "required": [
        "name",
        "hostPath",
        "mountPath"
      ]
    }
  },
  "properties": {
    "image": {
      "description": "Container image configuration",
      "$ref": "#/definitions/image"
    },
    "imagePullSecrets": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          }
        }
      },
      "default": []
    },
    "nameOverride": {
      "type": "string",
      "default": ""
    },
    "fullnameOverride": {
      "type": "string",
      "default": ""
    },
    "revisionHistoryLimit": {
      "type": "integer",
      "minimum": 0,
      "default": 10
    },
    "kubeRBACProxy": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "env": {
          "type": "object",
          "additionalProperties": {
            "type": [
              "string",
              "number",
              "boolean"
            ]
          }
        },
        "image": {
          "type": "object",
          "properties": {
            "registry": {
              "type": "string",
              "default": "quay.io"
            },
            "repository": {
              "type": "string",
              "default": "brancz/kube-rbac-proxy"
            },
            "tag": {
              "type": "string",
              "default": "v0.20.0"
            },
            "sha": {
              "type": "string",
              "default": ""
            },
            "pullPolicy": {
              "type": "string",
              "enum": [
                "IfNotPresent",
                "Always",
                "Never"
              ],
              "default": "IfNotPresent"
            }
          }
        },
        "extraArgs": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "default": []
        },
        "containerSecurityContext": {
          "type": "object"
        },
        "port": {
          "type": "integer",
          "default": 8100
        },
        "portName": {
          "type": "string",
          "default": "http"
        },
        "enableHostPort": {
          "type": "boolean",
          "default": false
        },
        "proxyEndpointsPort": {
          "type": "integer",
          "default": 8888
        },
        "enableProxyEndpointsHostPort": {
          "type": "boolean",
          "default": false
        },
        "resources": {
          "$ref": "#/definitions/resources"
        },
        "extraVolumeMounts": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/volumeMount"
          },
          "default": []
        },
        "tls": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "tlsClientAuth": {
              "type": "boolean",
              "default": false
            }
          }
        }
      }
    },
    "tlsSecret": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "caItem": {
          "type": "string",
          "default": ""
        },
        "certItem": {
          "type": "string",
          "default": "tls.crt"
        },
        "keyItem": {
          "type": "string",
          "default": "tls.key"
        },
        "secretName": {
          "type": "string",
          "default": "prometheus-node-exporter-tls"
        },
        "volumeName": {
          "type": "string",
          "default": "prometheus-node-exporter-tls"
        }
      }
    },
    "service": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "type": {
          "type": "string",
          "enum": [
            "ClusterIP",
            "NodePort",
            "LoadBalancer",
            "ExternalName"
          ],
          "default": "ClusterIP"
        },
        "clusterIP": {
          "type": "string",
          "default": ""
        },
        "port": {
          "type": "integer",
          "default": 9100
        },
        "servicePort": {
          "type": [
            "integer",
            "string"
          ],
          "default": ""
        },
        "targetPort": {
          "type": [
            "integer",
            "string"
          ],
          "default": 9100
        },
        "portName": {
          "type": "string",
          "default": "metrics"
        },
        "nodePort": {
          "type": [
            "integer",
            "null"
          ],
          "default": null
        },
        "listenOnAllInterfaces": {
          "type": "boolean",
          "default": true
        },
        "annotations": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "default": {
            "prometheus.io/scrape": "true"
          }
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "ipDualStack": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "ipFamilies": {
              "type": "array",
              "items": {
                "type": "string",
                "enum": [
                  "IPv4",
                  "IPv6"
                ]
              },
              "default": [
                "IPv6",
                "IPv4"
              ]
            },
            "ipFamilyPolicy": {
              "type": "string",
              "enum": [
                "SingleStack",
                "PreferDualStack",
                "RequireDualStack"
              ],
              "default": "PreferDualStack"
            }
          }
        },
        "externalTrafficPolicy": {
          "type": "string",
          "enum": [
            "",
            "Cluster",
            "Local"
          ]
        },
        "internalTrafficPolicy": {
          "type": "string",
          "enum": [
            "",
            "Cluster",
            "Local"
          ]
        }
      }
    },
    "networkPolicy": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "ingress": {
          "type": "array",
          "items": {
            "type": "object"
          }
        }
      }
    },
    "env": {
      "type": "object",
      "additionalProperties": {
        "type": [
          "string",
          "number",
          "boolean"
        ]
      }
    },
    "prometheus": {
      "type": "object",
      "properties": {
        "monitor": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "additionalLabels": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "namespace": {
              "type": "string",
              "default": ""
            },
            "jobLabel": {
              "type": "string",
              "default": ""
            },
            "podTargetLabels": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "targetLabels": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "scheme": {
              "type": "string",
              "enum": [
                "http",
                "https"
              ],
              "default": "http"
            },
            "basicAuth": {
              "type": "object"
            },
            "bearerTokenFile": {
              "type": "string"
            },
            "tlsConfig": {
              "type": "object"
            },
            "proxyUrl": {
              "type": "string",
              "default": ""
            },
            "selectorOverride": {
              "type": "object"
            },
            "attachMetadata": {
              "type": "object",
              "properties": {
                "node": {
                  "type": "boolean",
                  "default": false
                }
              }
            },
            "relabelings": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "metricRelabelings": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "interval": {
              "type": "string",
              "default": ""
            },
            "scrapeTimeout": {
              "type": "string",
              "default": "10s"
            },
            "apiVersion": {
              "type": "string",
              "default": ""
            },
            "sampleLimit": {
              "type": "integer",
              "default": 0
            },
            "targetLimit": {
              "type": "integer",
              "default": 0
            },
            "labelLimit": {
              "type": "integer",
              "default": 0
            },
            "labelNameLengthLimit": {
              "type": "integer",
              "default": 0
            },
            "labelValueLengthLimit": {
              "type": "integer",
              "default": 0
            }
          }
        },
        "podMonitor": {
          "type": "object",
          "properties": {
            "enabled": {
              "type": "boolean",
              "default": false
            },
            "namespace": {
              "type": "string",
              "default": ""
            },
            "additionalLabels": {
              "type": "object",
              "additionalProperties": {
                "type": "string"
              }
            },
            "podTargetLabels": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "apiVersion": {
              "type": "string",
              "default": ""
            },
            "selectorOverride": {
              "type": "object"
            },
            "attachMetadata": {
              "type": "object",
              "properties": {
                "node": {
                  "type": "boolean",
                  "default": false
                }
              }
            },
            "jobLabel": {
              "type": "string",
              "default": ""
            },
            "scheme": {
              "type": "string",
              "enum": [
                "http",
                "https"
              ],
              "default": "http"
            },
            "path": {
              "type": "string",
              "default": "/metrics"
            },
            "basicAuth": {
              "type": "object"
            },
            "bearerTokenSecret": {
              "type": "object"
            },
            "tlsConfig": {
              "type": "object"
            },
            "authorization": {
              "type": "object"
            },
            "oauth2": {
              "type": "object"
            },
            "proxyUrl": {
              "type": "string",
              "default": ""
            },
            "interval": {
              "type": "string",
              "default": ""
            },
            "scrapeTimeout": {
              "type": "string",
              "default": ""
            },
            "honorTimestamps": {
              "type": "boolean",
              "default": true
            },
            "honorLabels": {
              "type": "boolean",
              "default": true
            },
            "enableHttp2": {
              "type": "string",
              "default": ""
            },
            "filterRunning": {
              "type": "string",
              "default": ""
            },
            "followRedirects": {
              "type": "string",
              "default": ""
            },
            "params": {
              "type": "object"
            },
            "relabelings": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "metricRelabelings": {
              "type": "array",
              "items": {
                "type": "object"
              }
            },
            "sampleLimit": {
              "type": "integer",
              "default": 0
            },
            "targetLimit": {
              "type": "integer",
              "default": 0
            },
            "labelLimit": {
              "type": "integer",
              "default": 0
            },
            "labelNameLengthLimit": {
              "type": "integer",
              "default": 0
            },
            "labelValueLengthLimit": {
              "type": "integer",
              "default": 0
            }
          }
        }
      }
    },
    "updateStrategy": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "RollingUpdate",
            "Recreate"
          ],
          "default": "RollingUpdate"
        },
        "rollingUpdate": {
          "type": "object",
          "properties": {
            "maxUnavailable": {
              "type": [
                "integer",
                "string"
              ],
              "default": 1
            }
          }
        }
      }
    },
    "resources": {
      "$ref": "#/definitions/resources"
    },
    "restartPolicy": {
      "type": [
        "string",
        "null"
      ],
      "enum": [
        null,
        "Always",
        "OnFailure",
        "Never"
      ]
    },
    "serviceAccount": {
      "type": "object",
      "properties": {
        "create": {
          "type": "boolean",
          "default": true
        },
        "name": {
          "type": [
            "string",
            "null"
          ]
        },
        "annotations": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          }
        },
        "imagePullSecrets": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              }
            }
          }
        },
        "automount": {
          "type": "boolean",
          "default": false
        }
      }
    },
    "securityContext": {
      "$ref": "#/definitions/securityContext"
    },
    "podSecurityContext": {
      "$ref": "#/definitions/podSecurityContext"
    },
    "containerSecurityContext": {
      "$ref": "#/definitions/containerSecurityContext"
    },
    "rbac": {
      "type": "object",
      "properties": {
        "create": {
          "type": "boolean",
          "default": true
        }
      }
    },
    "endpoints": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "hostNetwork": {
      "type": "boolean",
      "default": true
    },
    "hostPID": {
      "type": "boolean",
      "default": true
    },
    "hostIPC": {
      "type": "boolean",
      "default": false
    },
    "hostRootFsMount": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "mountPropagation": {
          "type": "string",
          "enum": [
            "None",
            "HostToContainer",
            "Bidirectional"
          ],
          "default": "HostToContainer"
        }
      }
    },
    "hostProcFsMount": {
      "type": "object",
      "properties": {
        "mountPropagation": {
          "type": "string",
          "enum": [
            "",
            "None",
            "HostToContainer",
            "Bidirectional"
          ]
        }
      }
    },
    "hostSysFsMount": {
      "type": "object",
      "properties": {
        "mountPropagation": {
          "type": "string",
          "enum": [
            "",
            "None",
            "HostToContainer",
            "Bidirectional"
          ]
        }
      }
    },
    "affinity": {
      "type": "object"
    },
    "podAnnotations": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      },
      "default": {
        "cluster-autoscaler.kubernetes.io/safe-to-evict": "true"
      }
    },
    "podLabels": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "commonLabels": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "daemonsetAnnotations": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      }
    },
    "releaseLabel": {
      "type": "boolean",
      "default": false
    },
    "dnsConfig": {
      "type": "object",
      "properties": {
        "nameservers": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "searches": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "options": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string"
              },
              "value": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "nodeSelector": {
      "type": "object",
      "additionalProperties": {
        "type": "string"
      },
      "default": {
        "kubernetes.io/os": "linux"
      }
    },
    "terminationGracePeriodSeconds": {
      "type": [
        "integer",
        "null"
      ]
    },
    "tolerations": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "effect": {
            "type": "string",
            "enum": [
              "NoSchedule",
              "PreferNoSchedule",
              "NoExecute"
            ]
          },
          "operator": {
            "type": "string",
            "enum": [
              "Exists",
              "Equal"
            ]
          },
          "key": {
            "type": "string"
          },
          "value": {
            "type": "string"
          }
        }
      },
      "default": [
        {
          "effect": "NoSchedule",
          "operator": "Exists"
        }
      ]
    },
    "terminationMessageParams": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "terminationMessagePath": {
          "type": "string",
          "default": "/dev/termination-log"
        },
        "terminationMessagePolicy": {
          "type": "string",
          "enum": [
            "File",
            "FallbackToLogsOnError"
          ],
          "default": "File"
        }
      }
    },
    "priorityClassName": {
      "type": "string"
    },
    "extraArgs": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": []
    },
    "extraHostVolumeMounts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/hostVolumeMount"
      },
      "default": []
    },
    "configmaps": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "mountPath": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "mountPath"
        ]
      },
      "default": []
    },
    "secrets": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "mountPath": {
            "type": "string"
          }
        },
        "required": [
          "name",
          "mountPath"
        ]
      },
      "default": []
    },
    "namespaceOverride": {
      "type": "string",
      "default": ""
    },
    "sidecars": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "image": {
            "type": "string"
          },
          "volumeMounts": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        },
        "required": [
          "name"
        ]
      },
      "default": []
    },
    "sidecarVolumeMount": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/volumeMount"
      },
      "default": []
    },
    "sidecarHostVolumeMounts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/hostVolumeMount"
      },
      "default": []
    },
    "extraInitContainers": {
      "type": "array",
      "items": {
        "type": "object"
      },
      "default": []
    },
    "livenessProbe": {
      "$ref": "#/definitions/probe"
    },
    "readinessProbe": {
      "$ref": "#/definitions/probe"
    },
    "verticalPodAutoscaler": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "recommenders": {
          "type": "array",
          "items": {
            "type": "object"
          }
        },
        "controlledResources": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "maxAllowed": {
          "type": "object",
          "properties": {
            "cpu": {
              "type": "string"
            },
            "memory": {
              "type": "string"
            }
          }
        },
        "minAllowed": {
          "type": "object",
          "properties": {
            "cpu": {
              "type": "string"
            },
            "memory": {
              "type": "string"
            }
          }
        },
        "updatePolicy": {
          "type": "object",
          "properties": {
            "minReplicas": {
              "type": "integer"
            },
            "updateMode": {
              "type": "string",
              "enum": [
                "Off",
                "Initial",
                "Recreate",
                "Auto"
              ]
            }
          }
        }
      }
    },
    "extraManifests": {
      "type": "array",
      "items": {
        "type": [
          "string",
          "object"
        ]
      },
      "default": []
    },
    "extraVolumes": {
      "type": "array",
      "items": {
        "type": "object"
      },
      "default": []
    },
    "extraVolumeMounts": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/volumeMount"
      },
      "default": []
    },
    "testFramework": {
      "description": "Configuration for testFramework.",
      "type": "object",
      "properties": {
        "enabled": {
          "description": "Specifies whether testFramework is enabled.",
          "type": "boolean",
          "default": false
        },
        "annotations": {
          "description": "Annotations to be added to testFramework.",
          "type": "object"
        }
      }
    }
  },
  "additionalProperties": false
}